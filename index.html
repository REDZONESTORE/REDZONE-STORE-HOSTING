<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hosting Bot WhatsApp & Game Server Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                        url('https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/c964a8a9-fc65-4f59-975a-d502a2b4f8b8.png') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            min-height: 100vh;
        }

        .card-product {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-product:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .transaction-tablet {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            background: rgba(26, 32, 44, 0.95);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .admin-panel {
            background: rgba(26, 32, 44, 0.95);
            border-radius: 10px;
            padding: 25px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .price-tag {
            background: rgba(16, 185, 129, 0.8);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            display: inline-block;
        }

        .blinking {
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <nav class="bg-gray-900 bg-opacity-80 text-white py-4 px-6 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/14c6c808-060c-41e6-9171-d06405c3a1f4.png" alt="Logo WhatsApp Bot Hosting dengan ikon robot dan cloud" class="mr-3 rounded-full">
            <span class="text-xl font-bold">Bot & Game Hosting</span>
        </div>
        <div class="hidden md:flex space-x-6 items-center">
            <a href="#products" class="hover:text-green-400 transition">Produk</a>
            <a href="#how-to-order" class="hover:text-green-400 transition">Cara Order</a>
            <a href="#contact" class="hover:text-green-400 transition">Kontak</a>
            <span id="welcome-msg" class="hidden ml-4 text-sm text-gray-300">Halo, <span id="username-display"></span></span>
        </div>
        <div id="auth-buttons" class="flex items-center">
            <button onclick="showLogin()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md mr-2 transition">Login</button>
            <button onclick="showRegister()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-md transition">Daftar</button>
        </div>
        <div id="user-menu" class="hidden flex items-center">
            <button onclick="showAdminPanel()" id="admin-btn" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md mr-2 transition hidden">Admin</button>
            <button onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-md transition">Logout</button>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <section class="py-16 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Hosting Bot WhatsApp & SA-MP Server</h1>
            <p class="text-xl mb-8 max-w-2xl mx-auto">Solusi lengkap untuk kebutuhan bisnis dan game Anda dengan stabilitas tinggi</p>
            <div class="flex justify-center space-x-4">
                <a href="#products" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-medium transition">Lihat Produk</a>
                <a href="#how-to-order" class="bg-white text-gray-900 hover:bg-gray-200 px-6 py-3 rounded-lg font-medium transition">Cara Order</a>
            </div>
        </section>

        <section id="products" class="py-12">
            <h2 class="text-3xl font-bold text-center mb-4">Paket Hosting Lengkap</h2>
            <p class="text-center text-gray-300 mb-8 max-w-2xl mx-auto">Pilih paket yang sesuai dengan kebutuhan Anda</p>
            <div class="flex justify-center mb-8 space-x-4">
                <button onclick="filterProducts('all')" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition">Semua Produk</button>
                <button onclick="filterProducts('whatsapp')" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition">WhatsApp Bot</button>
                <button onclick="filterProducts('game')" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition">SA-MP Server</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="products-container">
                </div>
        </section>

        <section class="py-12 bg-gray-800 bg-opacity-50 rounded-xl my-8">
            <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">Keunggulan Layanan Kami</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="feature-card text-center p-6">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/72e21bf8-9c91-46f0-97af-0ba673a37b05.png" alt="Ikon uptime 99.9%" class="mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Uptime 99.9%</h3>
                        <p class="text-gray-300">Server stabil dengan garansi uptime tinggi</p>
                    </div>
                    <div class="feature-card text-center p-6">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/c07ceb78-4585-4aa5-b4b8-24b69e52f08e.png" alt="Ikon performa tinggi" class="mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Performa Tinggi</h3>
                        <p class="text-gray-300">Proses cepat dan responsif untuk semua kebutuhan bot</p>
                    </div>
                    <div class="feature-card text-center p-6">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/35573d77-141d-4392-94fe-53bc012a76dd.png" alt="Ikon keamanan data" class="mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Keamanan Data</h3>
                        <p class="text-gray-300">Proteksi data dan backup harian</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="how-to-order" class="py-12">
            <h2 class="text-3xl font-bold text-center mb-4">Cara Order</h2>
            <p class="text-center text-gray-300 mb-12 max-w-2xl mx-auto">Proses pemesanan yang mudah dan cepat</p>
            <div class="max-w-4xl mx-auto bg-gray-800 bg-opacity-50 rounded-xl p-8">
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="flex-1">
                        <div class="flex items-start mb-6">
                            <div class="bg-green-600 rounded-full w-8 h-8 flex items-center justify-center mr-4 flex-shrink-0">1</div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Pilih Paket</h3>
                                <p class="text-gray-300">Pilih paket hosting yang sesuai dengan kebutuhan Anda dari daftar produk kami.</p>
                            </div>
                        </div>
                        <div class="flex items-start mb-6">
                            <div class="bg-green-600 rounded-full w-8 h-8 flex items-center justify-center mr-4 flex-shrink-0">3</div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Isi Form Pembelian</h3>
                                <p class="text-gray-300">Isi form pembelian yang muncul dengan data yang valid.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-start mb-6">
                            <div class="bg-green-600 rounded-full w-8 h-8 flex items-center justify-center mr-4 flex-shrink-0">2</div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Klik Tombol Pesan</h3>
                                <p class="text-gray-300">Klik tombol "Pesan Sekarang" pada paket yang Anda pilih.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="bg-green-600 rounded-full w-8 h-8 flex items-center justify-center mr-4 flex-shrink-0">4</div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Konfirmasi via WhatsApp</h3>
                                <p class="text-gray-300">Anda akan diarahkan ke WhatsApp untuk konfirmasi pembayaran dan instalasi bot.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-8">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/599efb0a-7125-4208-87f2-08135fbef608.png" alt="Ilustrasi proses order dari website ke WhatsApp" class="mx-auto rounded-lg">
                </div>
            </div>
        </section>

        <section id="contact" class="py-12">
            <h2 class="text-3xl font-bold text-center mb-4">Kontak Kami</h2>
            <p class="text-center text-gray-300 mb-12 max-w-2xl mx-auto">Hubungi kami untuk informasi lebih lanjut</p>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="card-product p-6 flex flex-col items-center text-center">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/6dc48719-09bc-47b4-aef0-b84dd74bbc13.png" alt="Ikon WhatsApp" class="mb-4">
                    <h3 class="text-xl font-semibold mb-2">WhatsApp</h3>
                    <p class="text-gray-300 mb-4">Dapatkan respon tercepat via WhatsApp</p>
                    <a href="https://wa.me/6283816521302" class="mt-auto bg-green-500 hover:bg-green-600 px-6 py-2 rounded-md transition">Chat Sekarang</a>
                </div>
                <div class="card-product p-6 flex flex-col items-center text-center">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/005e04bd-ae9c-432e-88e3-58ebc9989e5c.png" alt="Ikon email" class="mb-4">
                    <h3 class="text-xl font-semibold mb-2">Email</h3>
                    <p class="text-gray-300 mb-4">support@redzonestore.com</p>
                    <a href="mailto:support@wabothosting.com" class="mt-auto bg-blue-500 hover:bg-blue-600 px-6 py-2 rounded-md transition">Kirim Email</a>
                </div>
                <div class="card-product p-6 flex flex-col items-center text-center">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0298919a-0a79-4988-874d-f675a86933ea.png" alt="Ikon kantor" class="mb-4">
                    <h3 class="text-xl font-semibold mb-2">Kantor</h3>
                    <p class="text-gray-300 mb-4">Jl. Teknologi No. 123, Jakarta</p>
                    <a href="https://maps.google.com" class="mt-auto bg-gray-500 hover:bg-gray-600 px-6 py-2 rounded-md transition">Lihat Peta</a>
                </div>
            </div>
        </section>
    </div>

    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 p-8 rounded-lg w-full max-w-md relative">
            <button onclick="hideLogin()" class="absolute top-4 right-4 text-gray-400 hover:text-white">×</button>
            <div class="text-center mb-6">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/884f9092-6b0e-4ebd-9a54-a4f9c3b8dda4.png" alt="Ikon login" class="mx-auto mb-4">
                <h2 class="text-2xl font-bold">Login</h2>
                <p class="text-gray-400 mt-2">Masuk ke akun Anda</p>
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-gray-300">Email</label>
                <input type="email" id="login-email" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500 focus:outline-none transition">
            </div>
            <div class="mb-6">
                <label class="block mb-2 text-gray-300">Password</label>
                <input type="password" id="login-password" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500 focus:outline-none transition">
            </div>
            <button onclick="login()" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded-lg font-medium transition">Login</button>
            <div class="text-center mt-4">
                <p class="text-gray-400">Belum punya akun? <a onclick="switchToRegister()" class="text-green-400 hover:text-green-300 cursor-pointer">Daftar disini</a></p>
            </div>
        </div>
    </div>

    <div id="register-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 p-8 rounded-lg w-full max-w-md relative">
            <button onclick="hideRegister()" class="absolute top-4 right-4 text-gray-400 hover:text-white">×</button>
            <div class="text-center mb-6">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/9a01b54d-720a-4bfb-b43e-70ffa2ae7ee1.png" alt="Ikon pendaftaran" class="mx-auto mb-4">
                <h2 class="text-2xl font-bold">Daftar Akun</h2>
                <p class="text-gray-400 mt-2">Buat akun baru Anda</p>
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-gray-300">Nama Lengkap</label>
                <input type="text" id="register-name" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500 focus:outline-none transition">
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-gray-300">Email</label>
                <input type="email" id="register-email" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500 focus:outline-none transition">
            </div>
            <div class="mb-6">
                <label class="block mb-2 text-gray-300">Password</label>
                <input type="password" id="register-password" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500 focus:outline-none transition">
            </div>
            <button onclick="register()" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded-lg font-medium transition">Daftar</button>
            <div class="text-center mt-4">
                <p class="text-gray-400">Sudah punya akun? <a onclick="switchToLogin()" class="text-green-400 hover:text-green-300 cursor-pointer">Login disini</a></p>
            </div>
        </div>
    </div>

    <div id="admin-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="admin-panel w-full max-w-5xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Admin Dashboard</h2>
                <button onclick="hideAdminPanel()" class="text-gray-400 hover:text-white">×</button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">Kelola Produk</h3>

                    <div class="bg-gray-700 rounded-lg p-6 mb-6">
                        <h4 class="font-medium mb-3">Tambah Produk Baru</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block mb-1 text-gray-300">Nama Produk</label>
                                <input type="text" id="product-name" class="w-full p-2 rounded bg-gray-600 border border-gray-500 focus:border-green-500">
                            </div>
                            <div>
                                <label class="block mb-1 text-gray-300">Harga (Rp)</label>
                                <input type="number" id="product-price" class="w-full p-2 rounded bg-gray-600 border border-gray-500 focus:border-green-500">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-1 text-gray-300">Deskripsi</label>
                            <textarea id="product-description" class="w-full p-2 rounded bg-gray-600 border border-gray-500 focus:border-green-500" rows="3"></textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-1 text-gray-300">Durasi</label>
                            <input type="text" id="product-duration" class="w-full p-2 rounded bg-gray-600 border border-gray-500 focus:border-green-500">
                        </div>
                        <button onclick="addProduct()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition">Tambah Produk</button>
                    </div>

                    <h4 class="font-medium mb-3">Statistik</h4>
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="bg-gray-700 rounded-lg p-4 text-center">
                            <div class="text-3xl font-bold mb-1" id="product-count">0</div>
                            <div class="text-gray-400 text-sm">Total Produk</div>
                        </div>
                        <div class="bg-gray-700 rounded-lg p-4 text-center">
                            <div class="text-3xl font-bold mb-1" id="transaction-count">0</div>
                            <div class="text-gray-400 text-sm">Total Transaksi</div>
                        </div>
                        <div class="bg-gray-700 rounded-lg p-4 text-center">
                            <div class="text-3xl font-bold mb-1" id="active-product-count">0</div>
                            <div class="text-gray-400 text-sm">Produk Aktif</div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold mb-4">Daftar Produk</h3>
                    <div id="admin-products-list" class="space-y-4">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div id="order-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 p-8 rounded-lg w-full max-w-md relative">
            <button onclick="hideOrderModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white">×</button>
            <div class="text-center mb-6">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/3c169ba3-d206-439b-8f45-b71fff171311.png" alt="Ikon keranjang belanja" class="mx-auto mb-4">
                <h2 class="text-2xl font-bold">Pesan <span id="order-product-name"></span></h2>
                <p class="text-gray-400 mt-2">Isi form berikut untuk melanjutkan</p>
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-gray-300">Nama Lengkap</label>
                <input type="text" id="order-name" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500">
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-gray-300">Email</label>
                <input type="email" id="order-email" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500">
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-gray-300">Nomor WhatsApp</label>
                <input type="tel" id="order-whatsapp" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500">
            </div>
            <div class="mb-6">
                <label class="block mb-2 text-gray-300">Catatan Tambahan</label>
                <textarea id="order-notes" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:border-green-500" rows="3"></textarea>
            </div>
            <button onclick="confirmOrder()" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded-lg font-medium transition">Pesan Sekarang</button>
            <button onclick="hideOrderModal()" class="w-full mt-2 bg-gray-600 hover:bg-gray-700 py-3 rounded-lg font-medium transition">Batal</button>
        </div>
    </div>

    <div id="qris-payment-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 p-8 rounded-lg w-full max-w-md relative text-center">
            <button onclick="hideQrisPaymentModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white">×</button>
            <div class="text-center mb-6">
                <img src="https://img101.pixhost.to/images/232/549078272_malzhost.jpg" alt="QRIS Icon" class="mx-auto mb-4 w-24 h-24">
                <h2 class="text-2xl font-bold">Pembayaran via QRIS</h2>
                <p class="text-gray-400 mt-2">Silakan lakukan pembayaran sejumlah <span id="qris-total-amount" class="text-green-400 font-semibold"></span> menggunakan aplikasi yang mendukung QRIS.</p>
            </div>
            <div id="qris-details" class="mb-6">
                <p class="text-gray-300 text-lg font-semibold mb-2">Pindai QRIS pada aplikasi pembayaran Anda.</p>
                <p class="text-gray-400 text-sm">Setelah pembayaran berhasil, mohon konfirmasi via WhatsApp.</p>
            </div>
            <button onclick="redirectToWhatsAppConfirm()" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded-lg font-medium transition">Konfirmasi Pembayaran via WhatsApp</button>
        </div>
    </div>

    <div class="transaction-tablet" id="transaction-tablet">
        <div class="flex justify-between items-center mb-3">
            <h3 class="text-lg font-semibold">Transaksi Terakhir</h3>
            <button onclick="hideTransactionTablet()" class="text-gray-400 hover:text-white">×</button>
        </div>
        <div id="transaction-details">
            </div>
    </div>

    <script>
        // Simulated database
        let users = [
            {
                id: 1,
                name: "Admin",
                email: "admin@bently55.com",
                password: "admin123",
                isAdmin: true
            }
        ];

        let products = [
            {
                id: 1,
                name: "SA-MP Budget #1 (50 Slot)",
                price: 5000,
                description: "Kapasitas Ram 5Gb Disk 10Gb - Cpu 70% - DDOS Protection",
                duration: "1 Bulan",
                category: "game"
            },
            {
                id: 2,
                name: "SA-MP Budget #2 (100 Slot)",
                price: 10000,
                description: "Kapasitas Ram 5Gb Disk 10GB - Cpu 70%- DDOS Protection",
                duration: "1 Bulan",
                category: "game"
            },
            {
                id: 3,
                name: "SA-MP Budget #3 (150 Slot)",
                price: 15000,
                description: "Kapasitas Ram 8 Gb Disk 8Gb  - Cpu 70% - DDOS Protection",
                duration: "1 Bulan",
                category: "game"
            },
            {
                id: 4,
                name: "SA-MP Budget (200 Slot)",
                price: 20000,
                description: "Kapasitas Ram 9GB Disk 10GB - Cpu 70% - DDOS Protection",
                duration: "1 Bulan",
                category: "game"
            },
            {
                id: 5,
                name: "Paket Host Bot WA",
                price: 1000,
                description: "Ram 1 Cpu 20%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 6,
                name: "Paket Patem Bot WA",
                price: 2000,
                description: "Ram 2 Cpu 25%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 7,
                name: "Paket ade ade an Bot WA",
                price: 3000,
                description: "Ram 3 Cpu 50%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 8,
                name: "Paket Pro Bot WA",
                price: 4000,
                description: "Ram 4 Cpu 60%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 9,
                name: "Paket Business Bot WA",
                price: 5000,
                description: "Ram 5 Cpu 65%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 10,
                name: "Paket Enterprise Bot WA",
                price: 6000,
                description: "Ram 6 Cpu 70%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 11,
                name: "Paket Basic Bot WA",
                price: 7000,
                description: " Ram 7 Cpu 75%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 12,
                name: "Paket 6 Bulan Pro Bot WA",
                price: 8000,
                description: "Ram 8 Cpu 80%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 13,
                name: "Paket Kelas Bot WA",
                price: 9000,
                description: "Ram 9 Cpu 90%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 14,
                name: "Paket Ganteng Bot WA",
                price: 10000,
                description: "Ram 10 Cpu 100%",
                duration: "1 Bulan",
                category: "whatsapp"
            },
            {
                id: 15,
                name: "Paket Reseller Bot WA",
                price: 11000,
                description: "Ram Unlimited &Cpu",
                duration: "1 Bulan",
                category: "whatsapp"
            }
        ];

        let transactions = [];
        let currentUser = null;
        let currentProduct = null;

        // DOM Elements
        const authButtons = document.getElementById('auth-buttons');
        const userMenu = document.getElementById('user-menu');
        const welcomeMsg = document.getElementById('welcome-msg');
        const usernameDisplay = document.getElementById('username-display');
        const adminBtn = document.getElementById('admin-btn');
        const loginModal = document.getElementById('login-modal');
        const registerModal = document.getElementById('register-modal');
        const adminModal = document.getElementById('admin-modal');
        const orderModal = document.getElementById('order-modal');
        const productsContainer = document.getElementById('products-container');
        const adminProductsList = document.getElementById('admin-products-list');
        const transactionTablet = document.getElementById('transaction-tablet');
        const transactionDetails = document.getElementById('transaction-details');
        const productCount = document.getElementById('product-count');
        const transactionCount = document.getElementById('transaction-count');
        const activeProductCount = document.getElementById('active-product-count'); // Added for active product count

        // QRIS Payment Modal Elements
        const qrisPaymentModal = document.getElementById('qris-payment-modal');
        const qrisTotalAmount = document.getElementById('qris-total-amount');


        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();

            // Check if user is logged in
            const storedUser = localStorage.getItem('currentUser');
            if (storedUser) {
                currentUser = JSON.parse(storedUser);
                updateAuthUI();
            }

            // Load transactions from localStorage
            const storedTransactions = localStorage.getItem('transactions');
            if (storedTransactions) {
                transactions = JSON.parse(storedTransactions);
            }
            updateStats(); // Ensure stats are updated after loading transactions
        });

        // Render products to the page with filtering
        function renderProducts(filter = 'all') {
            productsContainer.innerHTML = '';
            const filteredProducts = filter === 'all' ? products : products.filter(p => p.category === filter);

            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'card-product p-6';
                productCard.innerHTML = `
                    <div class="price-tag">Rp ${product.price.toLocaleString('id-ID')}</div>
                    <h3 class="text-xl font-semibold mb-2">${product.name}</h3>
                    <p class="text-gray-300 mb-4">${product.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-400">${product.duration}</span>
                        <button onclick="showOrderModal(${product.id})" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md transition">Pesan Sekarang</button>
                    </div>
                `;
                productsContainer.appendChild(productCard);
            });
        }

        function filterProducts(category) {
            renderProducts(category);
        }

        // Authentication Functions
        function showLogin() {
            loginModal.classList.remove('hidden');
            registerModal.classList.add('hidden');
        }

        function hideLogin() {
            loginModal.classList.add('hidden');
        }

        function showRegister() {
            registerModal.classList.remove('hidden');
            loginModal.classList.add('hidden');
        }

        function hideRegister() {
            registerModal.classList.add('hidden');
        }

        function switchToRegister() {
            hideLogin();
            showRegister();
        }

        function switchToLogin() {
            hideRegister();
            showLogin();
        }

        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthUI();
                hideLogin();
                Swal.fire('Berhasil!', 'Login Berhasil!', 'success');
            } else {
                Swal.fire('Error!', 'Email atau password salah!', 'error');
            }
        }

        function register() {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;

            if (users.find(u => u.email === email)) {
                Swal.fire('Error!', 'Email sudah terdaftar!', 'error');
                return;
            }

            const newUser = {
                id: users.length + 1,
                name: name,
                email: email,
                password: password,
                isAdmin: false
            };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users)); // Optionally save users to localStorage
            Swal.fire('Berhasil!', 'Pendaftaran Berhasil! Silakan Login.', 'success');
            switchToLogin();
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthUI();
            Swal.fire('Berhasil!', 'Logout Berhasil!', 'success');
            hideAdminPanel(); // Hide admin panel on logout
            hideTransactionTablet(); // Hide transaction tablet on logout
        }

        function updateAuthUI() {
            if (currentUser) {
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                welcomeMsg.classList.remove('hidden');
                usernameDisplay.textContent = currentUser.name;
                if (currentUser.isAdmin) {
                    adminBtn.classList.remove('hidden');
                } else {
                    adminBtn.classList.add('hidden');
                }
            } else {
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
                welcomeMsg.classList.add('hidden');
                adminBtn.classList.add('hidden');
            }
        }

        // Admin Panel Functions
        function showAdminPanel() {
            if (currentUser && currentUser.isAdmin) {
                adminModal.classList.remove('hidden');
                renderAdminProducts();
                updateStats();
            } else {
                Swal.fire('Akses Ditolak!', 'Anda tidak memiliki izin untuk mengakses halaman ini.', 'error');
            }
        }

        function hideAdminPanel() {
            adminModal.classList.add('hidden');
        }

        function addProduct() {
            const name = document.getElementById('product-name').value;
            const price = parseInt(document.getElementById('product-price').value);
            const description = document.getElementById('product-description').value;
            const duration = document.getElementById('product-duration').value;
            const category = document.querySelector('input[name="product-category"]:checked') ? document.querySelector('input[name="product-category"]:checked').value : 'whatsapp'; // Default category

            if (!name || isNaN(price) || !description || !duration) {
                Swal.fire('Error!', 'Semua field harus diisi!', 'error');
                return;
            }

            const newProduct = {
                id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
                name,
                price,
                description,
                duration,
                category
            };
            products.push(newProduct);
            localStorage.setItem('products', JSON.stringify(products));
            renderProducts();
            renderAdminProducts();
            updateStats();
            Swal.fire('Berhasil!', 'Produk berhasil ditambahkan!', 'success');

            // Clear form
            document.getElementById('product-name').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-description').value = '';
            document.getElementById('product-duration').value = '';
        }

        function deleteProduct(id) {
            Swal.fire({
                title: 'Anda yakin?',
                text: "Produk ini akan dihapus secara permanen!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ya, hapus!'
            }).then((result) => {
                if (result.isConfirmed) {
                    products = products.filter(p => p.id !== id);
                    localStorage.setItem('products', JSON.stringify(products));
                    renderProducts();
                    renderAdminProducts();
                    updateStats();
                    Swal.fire('Dihapus!', 'Produk berhasil dihapus.', 'success');
                }
            });
        }

        function renderAdminProducts() {
            adminProductsList.innerHTML = '';
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'bg-gray-700 rounded-lg p-4 flex justify-between items-center';
                productItem.innerHTML = `
                    <div>
                        <h4 class="font-semibold">${product.name}</h4>
                        <p class="text-gray-400 text-sm">Rp ${product.price.toLocaleString('id-ID')} | ${product.duration}</p>
                    </div>
                    <button onclick="deleteProduct(${product.id})" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded transition">Hapus</button>
                `;
                adminProductsList.appendChild(productItem);
            });
        }

        function updateStats() {
            productCount.textContent = products.length;
            transactionCount.textContent = transactions.length;
            // For active products, we'll just count all products for now since there's no "active" status.
            // If you implement product activation/deactivation, this logic would change.
            activeProductCount.textContent = products.length;
        }

        // Order Modal Functions
        function showOrderModal(productId) {
            if (!currentUser) {
                Swal.fire({
                    title: 'Login Dibutuhkan',
                    text: 'Anda harus login terlebih dahulu untuk melakukan pemesanan.',
                    icon: 'info',
                    showCancelButton: true,
                    confirmButtonText: 'Login Sekarang',
                    cancelButtonText: 'Batal'
                }).then((result) => {
                    if (result.isConfirmed) {
                        showLogin();
                    }
                });
                return;
            }

            currentProduct = products.find(p => p.id === productId);
            if (currentProduct) {
                document.getElementById('order-product-name').textContent = currentProduct.name;
                document.getElementById('order-name').value = currentUser.name;
                document.getElementById('order-email').value = currentUser.email;
                document.getElementById('order-whatsapp').value = ''; // Clear WhatsApp field for new order
                document.getElementById('order-notes').value = ''; // Clear notes field
                orderModal.classList.remove('hidden');
            }
        }

        function hideOrderModal() {
            orderModal.classList.add('hidden');
        }

        function confirmOrder() {
            const orderName = document.getElementById('order-name').value;
            const orderEmail = document.getElementById('order-email').value;
            const orderWhatsapp = document.getElementById('order-whatsapp').value;
            const orderNotes = document.getElementById('order-notes').value;

            if (!orderName || !orderEmail || !orderWhatsapp) {
                Swal.fire('Error!', 'Nama, Email, dan Nomor WhatsApp harus diisi!', 'error');
                return;
            }

            const newTransaction = {
                id: transactions.length > 0 ? Math.max(...transactions.map(t => t.id)) + 1 : 1,
                userId: currentUser.id,
                userName: currentUser.name,
                productId: currentProduct.id,
                productName: currentProduct.name,
                productPrice: currentProduct.price,
                orderName,
                orderEmail,
                orderWhatsapp,
                orderNotes,
                date: new Date().toLocaleString(),
                status: 'Menunggu Pembayaran'
            };
            transactions.push(newTransaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            updateStats();
            hideOrderModal();
            showQrisPaymentModal(newTransaction);
        }

        // QRIS Payment Modal Functions
        function showQrisPaymentModal(transaction) {
            qrisTotalAmount.textContent = `Rp ${transaction.productPrice.toLocaleString('id-ID')}`;
            qrisPaymentModal.classList.remove('hidden');
        }

        function hideQrisPaymentModal() {
            qrisPaymentModal.classList.add('hidden');
        }

        function redirectToWhatsAppConfirm() {
            if (currentProduct) {
                const message = `Halo, saya ingin mengkonfirmasi pembayaran untuk pemesanan:
Produk: ${currentProduct.name}
Harga: Rp ${currentProduct.price.toLocaleString('id-ID')}
Nama: ${document.getElementById('order-name').value}
Email: ${document.getElementById('order-email').value}
Nomor WhatsApp: ${document.getElementById('order-whatsapp').value}
Catatan: ${document.getElementById('order-notes').value || 'Tidak ada'}.
Saya sudah melakukan pembayaran via QRIS. Mohon segera diproses.`;
                const whatsappUrl = `https://wa.me/6283816521302?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
                hideQrisPaymentModal(); // Hide the QRIS modal after redirecting
            } else {
                Swal.fire('Error!', 'Tidak ada produk yang dipilih untuk konfirmasi.', 'error');
            }
        }

        // Transaction Tablet Functions
        function showTransactionTablet() {
            renderTransactionDetails();
            transactionTablet.classList.remove('hidden');
        }

        function hideTransactionTablet() {
            transactionTablet.classList.add('hidden');
        }

        function renderTransactionDetails() {
            transactionDetails.innerHTML = '';
            if (transactions.length === 0) {
                transactionDetails.innerHTML = '<p class="text-gray-400 text-center">Belum ada transaksi.</p>';
                return;
            }

            // Display only current user's transactions if logged in and not admin
            const userTransactions = currentUser && !currentUser.isAdmin
                ? transactions.filter(t => t.userId === currentUser.id)
                : transactions;

            if (userTransactions.length === 0) {
                transactionDetails.innerHTML = '<p class="text-gray-400 text-center">Belum ada transaksi untuk akun Anda.</p>';
                return;
            }

            userTransactions.slice(-5).reverse().forEach(t => { // Show last 5 transactions
                const transactionItem = document.createElement('div');
                transactionItem.className = 'bg-gray-700 rounded-lg p-3 mb-2';
                transactionItem.innerHTML = `
                    <p class="font-semibold text-white">${t.productName}</p>
                    <p class="text-gray-300 text-sm">Total: Rp ${t.productPrice.toLocaleString('id-ID')}</p>
                    <p class="text-gray-400 text-xs">${t.date}</p>
                    <span class="text-xs ${t.status === 'Selesai' ? 'text-green-400' : 'text-yellow-400'}">${t.status}</span>
                `;
                transactionDetails.appendChild(transactionItem);
            });
        }
    </script>
</body>
</html>